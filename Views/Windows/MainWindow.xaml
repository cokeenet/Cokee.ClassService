<Window xmlns:Controls1="clr-namespace:Cokee.ClassService.Views.Controls" 
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
 xmlns:local="clr-namespace:CokeeClass.Views.Controls"
    xmlns:Controls="clr-namespace:CokeeDP.Views.Controls" x:Class="Cokee.ClassService.MainWindow"
    mc:Ignorable="d"
        Title="CokeeClassService" 
        Width="1920" Height="1080"
        Left="0" Top="0"
        WindowStartupLocation="Manual"  ShowInTaskbar="False"
        Closing="Window_Closing" Closed="Window_Closed"
        WindowStyle="None"  WindowState="Normal" SnapsToDevicePixels="True"
        ResizeMode="NoResize"  AllowsTransparency="True" Background="{x:Null}" Topmost="True">
    <Grid x:Name="MainGrid">
        <Grid x:Name="floatGrid" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,10,40"  MouseDown="mouseDown" MouseUp="MouseUp" MouseMove="mouseMove" RenderTransformOrigin="0.5,0.5">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.RenderTransform>
                <TransformGroup>
                    <TranslateTransform x:Name="transT"/>
                </TransformGroup>
            </Grid.RenderTransform>
            <Image Source="/Resources/head.jpg" x:Name="head" MouseDown="Image_MouseDown" RenderTransformOrigin="0.5,0.5" Width="100" Height="100" >
                <Image.Triggers>
                    <EventTrigger RoutedEvent="Image.MouseUp">
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation By="360" Duration="0:0:5"
                             Storyboard.TargetName="head"  Storyboard.TargetProperty="(Image.RenderTransform).(RotateTransform.Angle)" />
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Image.Triggers>
                <Image.RenderTransform>
                    <TransformGroup>
                        <RotateTransform Angle="0"/>
                    </TransformGroup>
                </Image.RenderTransform>
                <Image.Clip>
                    <EllipseGeometry RadiusX="50" RadiusY="50" Center="50,50" />
                </Image.Clip>
            </Image>
            <ui:Badge Grid.Row="1" Margin="5"  FontSize="14" HorizontalContentAlignment="Center">
                <TextBlock x:Name="time" Text="--:--" TextAlignment="Center" Foreground="Black"/>
            </ui:Badge>
        </Grid>
        <Popup x:Name="cardPopup" PlacementTarget="{Binding ElementName=floatGrid}" Placement="Top" PopupAnimation="Slide" AllowsTransparency="True" Grid.RowSpan="2">

            <ui:Card VerticalAlignment="Top" HorizontalAlignment="Center" Background="White" >
                <Grid HorizontalAlignment="Center">
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition/>
                        <RowDefinition/>
                        <RowDefinition/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <ui:Button Content="学生管理" Icon="PeopleCommunity20" Margin="5" Click="StuMgr" HorizontalAlignment="Center"/>
                    <ui:Button Content="快速批注" Icon="Pen48" Grid.Row="1" Margin="5" Click="StartInk" HorizontalAlignment="Center"/>
                    <ui:Button Content="显示时间" Icon="Clock32" Grid.Row="2" Margin="5" HorizontalAlignment="Center" Click="ShowTime"/>
                    <ui:Button Content="Sticky" Icon="Note48" Grid.Row="3" Margin="5" Click="Button_Click" HorizontalAlignment="Center"/>
                    <ui:Button Content="Add Sticky" Icon="NoteAdd48" Grid.Row="4" Margin="5" Click="Button_Click_2" HorizontalAlignment="Center"/>

                </Grid>
            </ui:Card>
        </Popup>
        <ScrollViewer x:Name="Sclview" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalScrollBarVisibility="Auto" Margin="0,100,0,100" Visibility="Collapsed">
            <ItemsControl x:Name="Stickys" d:ItemsSource="{d:SampleData ItemCount=50}" HorizontalAlignment="Center" VerticalAlignment="Center">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <UniformGrid Columns="2" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <local:StickyNote StudentName="{Binding}"/>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>

            </ItemsControl>
        </ScrollViewer>
        <Controls:PostNote x:Name="postNote" Margin="710,325,710,265" Visibility="Collapsed"/>
        <Grid x:Name="inkGrid">
            <InkCanvas x:Name="inkcanvas" EditingMode="Ink">
                <InkCanvas.DefaultDrawingAttributes>
                    <DrawingAttributes Color="Red" FitToCurve="True" Height="4" Width="4"/>
                </InkCanvas.DefaultDrawingAttributes>
                <InkCanvas.Background>
                    <SolidColorBrush Color="White" Opacity="0.01" />
                </InkCanvas.Background>
            </InkCanvas>
            <Controls1:InkToolBar VerticalAlignment="Bottom" Margin="0,0,0,20"/>
        </Grid>
    </Grid>
</Window>