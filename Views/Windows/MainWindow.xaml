<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:helper="clr-namespace:Cokee.ClassService.Helper"
    xmlns:inkore="http://schemas.inkore.net/lib/ui/wpf/modern"
    xmlns:Controls="clr-namespace:Cokee.ClassService.Views.Controls"
    x:Class="Cokee.ClassService.MainWindow"
        mc:Ignorable="d" FontFamily="Lato"
        Title="ClassService"
        Width="1920" Height="1080"
        Left="0" Top="0" Loaded="Window_Loaded"
        WindowStartupLocation="CenterScreen"  ShowInTaskbar="False"
        Closing="Window_Closing" Closed="Window_Closed" KeyDown="MainWindow_OnKeyDown"
        WindowStyle="None"  WindowState="Normal" SnapsToDevicePixels="True" Focusable="False"
        ResizeMode="NoResize"  AllowsTransparency="True" Background="{x:Null}" Topmost="True">
    <Window.Resources>
    </Window.Resources>
    <Grid x:Name="MainGrid" Focusable="False">

        <Grid x:Name="inkGrid">
            <InkCanvas x:Name="inkcanvas" EditingMode="Ink" IsEnabled="False" Focusable="False">
                <InkCanvas.DefaultDrawingAttributes>
                    <DrawingAttributes Color="Red" Height="3.5" Width="3.5" />
                </InkCanvas.DefaultDrawingAttributes>
                <InkCanvas.Background>
                    <SolidColorBrush Color="White" Opacity="0.00" />
                </InkCanvas.Background>
            </InkCanvas>
            <Controls:InkToolBar x:Name="inkTool" Background="#4C484848" Focusable="False" Visibility="Collapsed" VerticalAlignment="Bottom" d:Visibility="Visible" HorizontalAlignment="Center" />
            <Grid x:Name="pptControls" VerticalAlignment="Center" Visibility="Collapsed" d:Visibility="Visible" Focusable="False">
                <ui:Card HorizontalAlignment="Left" Background="#4C484848" Focusable="False">
                    <Grid Width="60" Margin="-10" Focusable="False">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <ui:Button Focusable="False" Margin="5" FontSize="20" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Click="PptUp">
                            <ui:Button.Icon>
                                <ui:SymbolIcon Symbol="ArrowUp48" />
                            </ui:Button.Icon>
                        </ui:Button>
                        <TextBlock Focusable="False" x:Name="pptPage" Foreground="White" d:Text="11/11" Grid.Row="1" Margin="5" FontSize="17" HorizontalAlignment="Stretch" TextAlignment="Center" />
                        <ui:Button Focusable="False" Grid.Row="2" Margin="5" FontSize="20" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Click="PptDown">
                            <ui:Button.Icon>
                                <ui:SymbolIcon Symbol="ArrowDown48" />
                            </ui:Button.Icon>
                        </ui:Button>
                    </Grid>
                </ui:Card>
                <ui:Card HorizontalAlignment="Right" Background="#4C484848" Focusable="False">
                    <Grid Width="60" Margin="-10" Focusable="False">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="*" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <ui:Button Margin="5" FontSize="20" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Click="PptUp" Focusable="False">
                            <ui:Button.Icon>
                                <ui:SymbolIcon Symbol="ArrowUp48" />
                            </ui:Button.Icon>
                        </ui:Button>
                        <TextBlock x:Name="pptPage1" Foreground="White" d:Text="111/111" Grid.Row="1" Margin="5" FontSize="16" HorizontalAlignment="Stretch" TextAlignment="Center" Focusable="False" />
                        <ui:Button Grid.Row="2" Margin="5" FontSize="20" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Click="PptDown" Focusable="False">
                            <ui:Button.Icon>
                                <ui:SymbolIcon Symbol="ArrowDown48" />
                            </ui:Button.Icon>
                        </ui:Button>
                    </Grid>
                </ui:Card>
            </Grid>
        </Grid>
        <ui:Card x:Name="sideCard" VerticalAlignment="Center" VerticalContentAlignment="Stretch" HorizontalAlignment="Right" HorizontalContentAlignment="Stretch" Visibility="Collapsed" d:Visibility="Visible" Margin="0,0,5,0" BorderThickness="2">

            <ui:Card.Background>
                <ImageBrush ImageSource="/Resources/CardBackground/3.jpg" Stretch="UniformToFill" TileMode="None" Opacity="1" />
            </ui:Card.Background>

            <ui:Card.RenderTransform>
                <TranslateTransform x:Name="cardtran" X="300" d:X="0" />
            </ui:Card.RenderTransform>
            <StackPanel Background="Transparent">
                <Grid>
                    <Grid.Effect>
                        <BlurEffect />
                    </Grid.Effect>
                </Grid>
                <StackPanel VerticalAlignment="Top" Margin="5">
                    <TextBlock x:Name="time1" Text="--:--" d:Text="21:03:03" FontSize="30" FontFamily="Lato" Margin="0,0,0,5" />
                    <TextBlock x:Name="longDate" Text="-----" d:Text="2023年 周六 不知道什么节" FontSize="16" FontFamily="Lato" />
                </StackPanel>
                <StackPanel Margin="5">
                    <Grid x:Name="btnGrid">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <ui:Button Content="随机抽取" Margin="5" Click="ShowRandom" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                <ui:Button.Icon>
                                    <ui:SymbolIcon Symbol="ArrowShuffle48" />
                                </ui:Button.Icon>
                            </ui:Button>
                            <ui:Button Content="学生管理" Margin="5" Click="StuMgr" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                <ui:Button.Icon>
                                    <ui:SymbolIcon Symbol="PeopleCommunity20" />
                                </ui:Button.Icon>
                            </ui:Button>
                            <ui:Button Content="快速批注" Margin="5" Click="StartInk" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                <ui:Button.Icon>
                                    <ui:SymbolIcon Symbol="Pen48" />
                                </ui:Button.Icon>
                            </ui:Button>
                            <ui:Button Content="截图" Margin="5" Click="ScreenShot" MouseRightButtonDown="Button_MouseRightButtonDown" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                <ui:Button.Icon>
                                    <ui:SymbolIcon Symbol="Screenshot24" />
                                </ui:Button.Icon>
                            </ui:Button>
                            <ui:Button Content="课程管理" Margin="5" Click="CourseMgr" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                <ui:Button.Icon>
                                    <ui:SymbolIcon Symbol="List28" />
                                </ui:Button.Icon>
                            </ui:Button>
                        </StackPanel>
                        <StackPanel Grid.Column="1">
                            <ui:Button Content="音量调节"  Margin="5" HorizontalAlignment="Stretch" Click="VolumeCard" VerticalAlignment="Stretch">
                                <ui:Button.Icon>
                                    <ui:SymbolIcon Symbol="Speaker228" />
                                </ui:Button.Icon>
                            </ui:Button>
                            <ui:Button Content="桌面便签"  Margin="5" Click="AddFloatCard" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" MouseRightButtonDown="UsbDebug">
                                <ui:Button.Icon>
                                    <ui:SymbolIcon Symbol="NoteAdd28" />
                                </ui:Button.Icon>
                            </ui:Button>
                            <ui:Button Content="大学梦"  Margin="5" Click="ShowStickys" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" MouseRightButtonDown="PostNote">
                                <ui:Button.Icon>
                                    <ui:SymbolIcon Symbol="Notebook32" />
                                </ui:Button.Icon>
                            </ui:Button>
                            <ui:Button Content="计时器"  Click="Timer" Margin="5" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" MouseRightButtonDown="Debug_RightBtn">
                                <ui:Button.Icon>
                                    <ui:SymbolIcon Symbol="Clock28" />
                                </ui:Button.Icon>
                            </ui:Button>
                            <ui:Button Content="设置"  Margin="5" MouseRightButtonDown="QuickFix"  Click="OpenSettings" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                <ui:Button.Icon>
                                    <ui:SymbolIcon Symbol="Settings32" />
                                </ui:Button.Icon>
                            </ui:Button>
                        </StackPanel>
                    </Grid>
                    <StackPanel>

                        <ui:Button Click="MonitorOff" HorizontalAlignment="Right" Margin="5" Content="休眠">
                            <ui:Button.Icon>
                                <ui:SymbolIcon Symbol="Power28" />
                            </ui:Button.Icon>
                        </ui:Button>
                        <ui:InfoBar x:Name="birth" d:IsOpen="False" IsOpen="False" IsClosable="False" Severity="Success" Margin="5" d:Message="🎉 今天是 XXX 的生日！" />
                        <ui:Card Margin="5,0,5,0" Visibility="Collapsed" d:Visibility="Visible">
                            <StackPanel>
                                <TextBlock d:Text="本节课程:语文 11:30-12:40" Margin="0,0,0,5" />
                                <TextBlock d:Text="下节课程:语文 11:30-12:40" />
                            </StackPanel>
                        </ui:Card>
                    </StackPanel>
                    <Grid>
                        <TextBlock x:Name="VerStr" Text="CokeeClass 版本1.0.1111" Margin="5" Foreground="White" />
                        <!--<ui:SymbolIcon HorizontalAlignment="Right" Symbol="TreeEvergreen20" FontSize="19" Filled="True" Foreground="Green" Margin="5" />-->
                        <TextBlock HorizontalAlignment="Right" Text="🌟" VerticalAlignment="Center" FontSize="19" FontFamily="Segoe UI Emoji" Foreground="Gold" />
                    </Grid>
                    <TextBlock x:Name="Easter" Text="那，祝我，祝你，祝我们。" Margin="5" Visibility="Collapsed" />
                </StackPanel>
                <TextBlock Text="CokeeTech 秋坂科技" Margin="5" HorizontalAlignment="Right" VerticalAlignment="Bottom" Foreground="Wheat" />
            </StackPanel>
        </ui:Card>
        <Popup x:Name="cardPopup" PlacementTarget="{Binding ElementName=floatGrid}" Placement="Top" PopupAnimation="Fade" StaysOpen="False" AllowsTransparency="True" KeyDown="MainWindow_OnKeyDown">
            <ui:Card VerticalAlignment="Center" HorizontalAlignment="Center" Background="{ui:ThemeResource}">
                <Grid VerticalAlignment="Bottom">
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <Controls:TouchableScrollViewer MaxHeight="165" Content="{Binding ElementName=btnGrid}" />
                </Grid>
            </ui:Card>
        </Popup>

        <Controls:PostNote x:Name="postNote" Visibility="Collapsed" Background="{ui:ThemeResource}" HorizontalAlignment="Center" VerticalAlignment="Center" />
        <ui:InfoBar x:Name="infobar" VerticalAlignment="Top" HorizontalAlignment="Center" Message="当前焦点在CokeeClass上!" />
        <Controls:RandomControl x:Name="rancor" Background="{ui:ThemeResource}" HorizontalAlignment="Center" VerticalAlignment="Center" Width="Auto" Height="300" Visibility="Collapsed" />
        <Controls:RandomResult x:Name="ranres" Background="{ui:ThemeResource}" HorizontalAlignment="Center" VerticalAlignment="Center" Height="500" Width="Auto" Visibility="Collapsed" />
        <Controls:VolumeCard x:Name="volcd" Background="{ui:ThemeResource}" Visibility="Collapsed" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,10,300" Width="290" d:Visibility="Collapsed" />
        <Controls:CourseCard x:Name="courseCard"  Background="#B2333333" Visibility="Collapsed" d:Visibility="Visible" d:IsHidden="True" />
        <Grid x:Name="floatGrid" MouseLeftButtonDown="FloatGrid_MouseDown" MouseLeftButtonUp="FloatGrid_MouseUp" MouseMove="FloatGrid_MouseMove" RenderTransformOrigin="0.5,0.5" HorizontalAlignment="Right" VerticalAlignment="Bottom" Focusable="False">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Grid.RenderTransform>
                <TransformGroup>
                    <TranslateTransform x:Name="transT" X="-10" Y="-100" />
                </TransformGroup>
            </Grid.RenderTransform>
            <ui:Badge Appearance="Light" FontSize="11" d:Content="0000" x:Name="nameBadge" Visibility="Collapsed" d:Visibility="Visible" HorizontalAlignment="Center" Margin="3" />

            <Image Source="/Resources/head.jpg" x:Name="head" RenderTransformOrigin="0.5,0.5" Width="80" Height="80" Stretch="Fill" Grid.Row="1">
                <Image.Effect>
                    <DropShadowEffect ShadowDepth="1" />
                </Image.Effect>
                <Image.RenderTransform>
                    <TransformGroup>
                        <RotateTransform x:Name="rotateT" Angle="0" />
                    </TransformGroup>
                </Image.RenderTransform>
                <Image.Clip>
                    <EllipseGeometry RadiusX="40" RadiusY="40" Center="40,40" />
                </Image.Clip>
            </Image>
            <ui:ProgressRing x:Name="progress" Grid.Row="1" Height="80" Width="80" Progress="0" Visibility="Collapsed" />

            <Grid HorizontalAlignment="Right" VerticalAlignment="Bottom" Width="25" Height="25" Grid.Row="1">
                <Grid.RenderTransform>
                    <ScaleTransform x:Name="iconTrans" ScaleX="0" ScaleY="0" CenterX="15" CenterY="15" d:ScaleX="1" d:ScaleY="1" />
                </Grid.RenderTransform>
                <Ellipse x:Name="iconE" Fill="White" />
                <ui:SymbolIcon x:Name="icon" Width="15" Height="15" Foreground="Black" Margin="5" FontSize="15" Symbol="Info12" />
            </Grid>
            <ui:Badge Grid.Row="2" Margin="5" Appearance="Dark" FontSize="14" HorizontalContentAlignment="Center">
                <TextBlock x:Name="time" Text="--:--" TextAlignment="Center" d:Text="11:11:11" />
            </ui:Badge>
        </Grid>
        <Controls:TouchableScrollViewer x:Name="logview" Width="500" Height="300" HorizontalAlignment="Right" VerticalAlignment="Bottom" Visibility="Collapsed">
            <StackPanel Background="Black">
                <TextBlock Text="Debug Log Output" Margin="5" />
                <RichTextBox x:Name="richTextBox" Margin="5" Background="Black" />
            </StackPanel>
        </Controls:TouchableScrollViewer>
        <Controls:UsbCard x:Name="usbCard" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,10,200" d:Visibility="Visible" />
        <ui:SnackbarPresenter x:Name="snackbar" Margin="24,24,24,80" MaxHeight="300" VerticalAlignment="Bottom" HorizontalAlignment="Center" />
    </Grid>
</Window>