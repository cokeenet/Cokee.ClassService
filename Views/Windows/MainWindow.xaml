<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml" x:Class="Cokee.ClassService.MainWindow"
        mc:Ignorable="d"
        Title="CokeeClassService" 
        Width="1920" Height="1080"
        Left="0" Top="0"
        WindowStartupLocation="Manual"  ShowInTaskbar="False"
        Closing="Window_Closing" Closed="Window_Closed"
        WindowStyle="None"  WindowState="Normal" SnapsToDevicePixels="True"
        ResizeMode="NoResize"  AllowsTransparency="True" Background="{x:Null}" Topmost="True">
    <Grid>
        <InkCanvas x:Name="inkcanvas" EditingMode="InkAndGesture" Background="Transparent">
            <InkCanvas.DefaultDrawingAttributes>
                <DrawingAttributes Color="Red" FitToCurve="True" Height="4" Width="4"/>
            </InkCanvas.DefaultDrawingAttributes>
        </InkCanvas>
        <Grid HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,10,100"  Width="100" Height="100" MouseDown="MouseDown" MouseUp="MouseUp" MouseMove="mouseMove" RenderTransformOrigin="0.5,0.5">
            <Grid.RenderTransform>
                <TransformGroup>
                    <ScaleTransform/>
                    <SkewTransform/>
                    <RotateTransform/>
                    <TranslateTransform X="0"/>
                </TransformGroup>
            </Grid.RenderTransform>
            <Image Source="/Resources/head.jpg" x:Name="head" MouseDown="Click" RenderTransformOrigin="0.5,0.5" >
                <Image.RenderTransform>
                    <TransformGroup>
                        <TranslateTransform x:Name="transT"/>
                    </TransformGroup>
                </Image.RenderTransform>
                <Image.Clip>
                    <EllipseGeometry RadiusX="50" RadiusY="50" Center="50,50" />
                </Image.Clip>
            </Image>
        </Grid>
        <Popup x:Name="cardPopup" PlacementTarget="{Binding ElementName=head}" Placement="Top" PopupAnimation="Slide" AllowsTransparency="True">

            <ui:Card VerticalAlignment="Top" HorizontalAlignment="Center" Background="#CC848484" >
                <Grid HorizontalAlignment="Center">
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition/>
                        <RowDefinition/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <ui:Button Content="学生管理" Icon="PeopleCommunity20" Margin="5" Click="StuMgr" HorizontalAlignment="Center"/>
                    <ui:Button Content="快速批注" Icon="Pen48" Grid.Row="1" Margin="5" Click="StartInk" HorizontalAlignment="Center"/>
                    <ui:Button Content="显示时间" Icon="Clock32" Grid.Row="2" Margin="5" HorizontalAlignment="Center" Click="Button_Click_1"/>
                    <ui:Button Content="Sticky" Icon="Note48" Grid.Row="3" Margin="5" Click="Button_Click" HorizontalAlignment="Center"/>

                </Grid>
            </ui:Card>
        </Popup>
        <ItemsControl x:Name="Stickys" d:ItemsSource="{d:SampleData ItemCount=56}" Margin="0,0,0,442">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <UniformGrid Columns="7" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <ui:Card Margin="10" VerticalAlignment="Stretch">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <Image Source="{Binding HeadPicUrl}" Width="50" Height="50">
                                <Image.Clip>
                                    <EllipseGeometry RadiusX="25" RadiusY="25" Center="25,25" />
                                </Image.Clip>
                            </Image>
                            <Label Grid.Row="1" Content="{Binding Name}" FontSize="12" Margin="5" HorizontalAlignment="Center"/>
                            <ui:Badge Grid.Row="2" Content="{Binding Role}" FontSize="10" HorizontalAlignment="Center" Appearance="{Binding Role, Converter={StaticResource LevelConverter}}"  Visibility="{Binding RoleStr, Converter={StaticResource VisibilityConverter}}"/>
                        </Grid>
                    </ui:Card>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </Grid>
</Window>