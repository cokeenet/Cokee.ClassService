<UserControl
    x:Class="Cokee.ClassService.Views.Controls.InkToolBar"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:ikw="http://schemas.inkore.net/lib/ui/wpf"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.inkore.net/lib/ui/wpf/modern"
    Width="Auto"
    mc:Ignorable="d">
    <Border
        x:Name="card"
        Padding="0"
        VerticalAlignment="Stretch"
        ui:ThemeManager.RequestedTheme="Default"
        Style="{StaticResource CardBorderStyle}">
        <Border.RenderTransform>
            <TranslateTransform x:Name="inkTrans" />
        </Border.RenderTransform>
        <Grid x:Name="mainGrid">
            <Grid.ColumnDefinitions>
                <ColumnDefinition MinWidth="84" />
                <ColumnDefinition MinWidth="84" />
                <ColumnDefinition MinWidth="84" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition MinWidth="84" />
                <ColumnDefinition MinWidth="84" />
            </Grid.ColumnDefinitions>
            <Button
                x:Name="curBtn"
                Margin="5"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                Click="Button_Click"
                Tag="Cursor">
                <ui:IconAndText Content="指针" Icon="{x:Static ui:FluentSystemIcons.Cursor_24_Filled}" />
            </Button>
            <Button
                x:Name="penBtn"
                Grid.Column="1"
                Margin="5"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                Click="Button_Click"
                Style="{DynamicResource AccentButtonStyle}"
                Tag="Pen">
                <ui:IconAndText Content="笔" Icon="{x:Static ui:FluentSystemIcons.Pen_24_Filled}" />
            </Button>

            <Button
                x:Name="eraserBtn"
                Grid.Column="2"
                Margin="5"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                Click="Button_Click"
                MouseRightButtonDown="ClearScr"
                Tag="Eraser">
                <ui:IconAndText Content="橡皮" Icon="{x:Static ui:FluentSystemIcons.Eraser_24_Filled}" />
            </Button>
            <Button
                x:Name="undoBtn"
                Grid.Column="3"
                Margin="5"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                Click="Button_Click"
                Tag="Back"
                Visibility="Collapsed">
                <ui:IconAndText Content="撤销" Icon="{x:Static ui:FluentSystemIcons.ArrowStepBack_20_Filled}" />
            </Button>
            <Button
                x:Name="moreBtn"
                Grid.Column="4"
                Margin="5"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                Click="Button_Click"
                Tag="More">
                <ui:IconAndText Content="更多" Icon="{x:Static ui:FluentSystemIcons.MoreHorizontal_48_Filled}" />
                <ui:FlyoutService.Flyout>
                    <ui:Flyout x:Name="moreMenu" Placement="Top">
                        <StackPanel
                            x:Name="moreCard"
                            HorizontalAlignment="Center"
                            DataContext="{Binding AppSettings}">
                            <TextBlock
                                Grid.Row="0"
                                Margin="5"
                                FontSize="16"
                                Text="书写菜单" />
                            <StackPanel Grid.Row="1">
                                <Button
                                    x:Name="redoBtn"
                                    Margin="5"
                                    HorizontalAlignment="Stretch"
                                    VerticalAlignment="Stretch"
                                    Click="Button_Click"
                                    Tag="Redo">
                                    <ui:IconAndText Content="重做" Icon="{x:Static ui:FluentSystemIcons.ArrowRedo_48_Regular}" />
                                </Button>
                                <Button
                                    Margin="5"
                                    HorizontalAlignment="Stretch"
                                    VerticalAlignment="Stretch"
                                    Click="Button_Click"
                                    Tag="Select">

                                    <ui:IconAndText Content="选择" Icon="{x:Static ui:FluentSystemIcons.SelectObject_24_Regular}" />
                                </Button>
                            </StackPanel>
                        </StackPanel>
                    </ui:Flyout>
                </ui:FlyoutService.Flyout>
            </Button>
            <Button
                x:Name="exitBtn"
                Grid.Column="5"
                Margin="5"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                Click="Button_Click"
                Tag="Exit">
                <ui:IconAndText Content="退出" Icon="{x:Static ui:FluentSystemIcons.ArrowExit_20_Filled}" />
            </Button>
            <ikw:XamlCachedElements>
                <ui:Flyout
                    x:Name="colorFlyout"
                    Placement="Top"
                    ShowMode="Auto">
                    <Border HorizontalAlignment="Center" VerticalAlignment="Bottom">
                        <Grid x:Name="colorGrid">
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition />
                                <RowDefinition />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition />
                                <ColumnDefinition />
                                <ColumnDefinition />
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>
                            <TextBlock
                                Grid.Row="0"
                                Grid.ColumnSpan="2"
                                Margin="5"
                                HorizontalAlignment="Left"
                                FontSize="16"
                                Text="色板" />
                            <StackPanel Grid.Row="1" Grid.RowSpan="3">
                                <Slider
                                    x:Name="penSlider"
                                    MinHeight="90"
                                    HorizontalAlignment="Center"
                                    HorizontalContentAlignment="Stretch"
                                    VerticalContentAlignment="Stretch"
                                    Maximum="18"
                                    Minimum="1"
                                    Orientation="Vertical"
                                    ValueChanged="Slider_ValueChanged"
                                    Value="3.5" />
                                <TextBlock
                                    Margin="5"
                                    FontSize="12"
                                    Text="粗细" />
                            </StackPanel>
                            <Button
                                Grid.Row="1"
                                Grid.Column="1"
                                Width="50"
                                Height="30"
                                Margin="5"
                                Background="Red"
                                Click="ColorBtn"
                                FontSize="17">
                                <ui:FontIcon Icon="{x:Static ui:FluentSystemIcons.CheckmarkCircle_48_Regular}" />
                            </Button>
                            <Button
                                Grid.Row="2"
                                Grid.Column="1"
                                Width="50"
                                Height="30"
                                Margin="5"
                                Background="CornflowerBlue"
                                Click="ColorBtn"
                                FontSize="17" />
                            <Button
                                Grid.Row="3"
                                Grid.Column="1"
                                Width="50"
                                Height="30"
                                Margin="5"
                                Background="#FF306C00"
                                Click="ColorBtn"
                                FontSize="17" />
                            <Button
                                Grid.Row="1"
                                Grid.Column="2"
                                Width="50"
                                Height="30"
                                Margin="5"
                                Background="Black"
                                Click="ColorBtn"
                                FontSize="17" />
                            <Button
                                Grid.Row="2"
                                Grid.Column="2"
                                Width="50"
                                Height="30"
                                Margin="5"
                                Background="#FF321EB5"
                                Click="ColorBtn"
                                FontSize="17" />
                            <Button
                                Grid.Row="3"
                                Grid.Column="2"
                                Width="50"
                                Height="30"
                                Margin="5"
                                Background="#FF66D552"
                                Click="ColorBtn"
                                FontSize="17" />
                            <Button
                                Grid.Row="1"
                                Grid.Column="3"
                                Width="50"
                                Height="30"
                                Margin="5"
                                Background="White"
                                Click="ColorBtn"
                                FontSize="17"
                                Foreground="Black" />
                            <Button
                                Grid.Row="2"
                                Grid.Column="3"
                                Width="50"
                                Height="30"
                                Margin="5"
                                Background="#FFFF8B00"
                                Click="ColorBtn"
                                FontSize="17" />
                            <Button
                                Grid.Row="3"
                                Grid.Column="3"
                                Width="50"
                                Height="30"
                                Margin="5"
                                Background="#FF4EA1B7"
                                Click="ColorBtn"
                                FontSize="17" />
                        </Grid>
                    </Border>
                </ui:Flyout>
            </ikw:XamlCachedElements>
        </Grid>
    </Border>
</UserControl>